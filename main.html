<html>
    <head>
        <script src="./javascript/jquery.js"></script>
        <script src="./dist/jquery.bxslider.js"></script>
        <script src="./dist/vendor/jquery.fitvids.js"></script>
        <link rel="stylesheet" href="./css/style.css" />
        <link rel="stylesheet" href="./dist/jquery.bxslider.min.css">
        <title> Casabatllo INFO </title>
    </head>

    <body>
        <div class="loading" style="display: none;">Loading&#8230;</div>

        <div class="container">
            <div class="slider">
                <img src='./images/cat/CAT-slide-01-HR.png' id="maina" style="display: block;" class="main_image">
                <img src='./images/cat/CAT-slide-02-HR.png' id="mainb" style="display: block;" class="main_image">
                <img src='./images/cat/CAT-slide-03-HR.png' id="mainc" style="display: block;" class="main_image">
                <img src='./images/cat/CAT-slide-04-HR.png' id="maind" style="display: block;" class="main_image">
                <video src='./images/cat/CAT_video_totem.mp4' id="main_video" loop class="main_image" autoplay muted style="background-color: #1d60a3;">
            </div>

            <div style="display: none;" id="page">

            </div>

            <div>
                <div>
                    <img src="./images/arrow_left_t.png" id="left_pager" class="left_page_btn">
                    <img src="./images/arrow_right_t.png" id="right_pager" class="right_page_btn">
                </div>
            </div>

            <div class="btn_container">
                <button class="btn_size select" id="cat">CAT</button>
                <button class="btn_size" id="kor">KOR</button>
                <button class="btn_size" id="eng">ENG</button>
                <button class="btn_size" id="esp">ESP</button>
            </div>
        </div>

        <script>
            var slider = $('.slider').bxSlider({
                auto: true,
                speed: 0,
                mode: 'horizontal',
                autoControls: false,
                pager: false,
                captions: false,
                video: true,
                wrapperClass: 'bx-wrapper',
                slideMargin: 0,
                touchEnabled: false,
                prevSelector: 'left_pager',
                nextSelector: 'right_pager',
                onSlideNext: function(newIndex) {
                    if (newIndex[0]['id'] === 'main_video') {
                        slider.stopAuto()
                        setTimeout(function () {
                            slider.startAuto()
                        }, 15000)
                    } else {
                        slider.startAuto()
                    }

                    return true;
                },
                onSlidePrev: function(newIndex) { 
                    if (newIndex[0]['id'] === 'main_video') {
                        slider.stopAuto()
                        setTimeout(function () {
                            slider.startAuto()
                        }, 15000)
                    } else {
                        slider.startAuto()
                    }

                    return true; 
                },
            });

            $(document).ready(function(){
                slider
            });

            const catImage = [
            './images/cat/CAT-slide-01-HR.png',
            './images/cat/CAT-slide-02-HR.png',
            './images/cat/CAT-slide-03-HR.png',
            './images/cat/CAT-slide-04-HR.png',
            './images/cat/CAT_video_totem.mp4'
            ]

            const korImage = [
            './images/cor/COR-slide-01-HR.png',
            './images/cor/COR-slide-02-HR.png',
            './images/cor/COR-slide-03-HR.png',
            './images/cor/COR-slide-04-HR.png',
            './images/cor/KOR_video_totem.mp4'
            ]

            const engImage = [
            './images/eng/ENG-slide-01-HR.png',
            './images/eng/ENG-slide-02-HR.png',
            './images/eng/ENG-slide-03-HR.png',
            './images/eng/ENG-slide-04-HR.png',
            './images/eng/ENG_video_totem.mp4'
            ]

            const espImage = [
            './images/esp/ESP-slide-01-HR.png',
            './images/esp/ESP-slide-02-HR.png',
            './images/esp/ESP-slide-03-HR.png',
            './images/esp/ESP-slide-04-HR.png',
            './images/esp/ESP_video_totem.mp4'
            ]

            var seleteLang = [
            './images/cat/CAT-slide-01-HR.png',
            './images/cat/CAT-slide-02-HR.png',
            './images/cat/CAT-slide-03-HR.png',
            './images/cat/CAT-slide-04-HR.png',
            './images/cat/CAT_video_totem.mp4'
            ]

            $("#cat").click(function () {
                seleteLang = catImage

                if (slider.getCurrentSlide() === 4 && $(".slider").children('video').attr('src') !== seleteLang[4]) {
                    $(".loading").css('display', 'block')
                }

                $("#maina").attr('src', seleteLang[0])
                $("#mainb").attr('src', seleteLang[1])
                $("#mainc").attr('src', seleteLang[2])
                $("#maind").attr('src', seleteLang[3])
                if ($(".slider").children('video').attr('src') !== seleteLang[4]) {
                    $(".slider").children('video').attr('src', seleteLang[4])
                }
                $("#cat").addClass('select')
                $("#kor").removeClass('select')
                $("#eng").removeClass('select')
                $("#esp").removeClass('select')

                setTimeout(function () {
                    $(".loading").css('display', 'none')
                }, 1000)
            })
            $("#kor").click(function () {
                seleteLang = korImage

                if (slider.getCurrentSlide() === 4 && $(".slider").children('video').attr('src') !== seleteLang[4]) {
                    $(".loading").css('display', 'block')
                }

                $("#maina").attr('src', seleteLang[0])
                $("#mainb").attr('src', seleteLang[1])
                $("#mainc").attr('src', seleteLang[2])
                $("#maind").attr('src', seleteLang[3])
                if ($(".slider").children('video').attr('src') !== seleteLang[4]) {
                    $(".slider").children('video').attr('src', seleteLang[4])
                }
                $("#cat").removeClass('select')
                $("#kor").addClass('select')
                $("#eng").removeClass('select')
                $("#esp").removeClass('select')

                setTimeout(function () {
                    $(".loading").css('display', 'none')
                }, 1000)
            })
            $("#eng").click(function () {
                seleteLang = engImage

                if (slider.getCurrentSlide() === 4 && $(".slider").children('video').attr('src') !== seleteLang[4]) {
                    $(".loading").css('display', 'block')
                }

                $("#maina").attr('src', seleteLang[0])
                $("#mainb").attr('src', seleteLang[1])
                $("#mainc").attr('src', seleteLang[2])
                $("#maind").attr('src', seleteLang[3])
                if ($(".slider").children('video').attr('src') !== seleteLang[4]) {
                    $(".slider").children('video').attr('src', seleteLang[4])
                }
                $("#cat").removeClass('select')
                $("#kor").removeClass('select')
                $("#eng").addClass('select')
                $("#esp").removeClass('select')

                setTimeout(function () {
                    $(".loading").css('display', 'none')
                }, 1000)
            })
            $("#esp").click(function () {
                seleteLang = espImage

                if (slider.getCurrentSlide() === 4 && $(".slider").children('video').attr('src') !== seleteLang[4]) {
                    $(".loading").css('display', 'block')
                }

                $("#maina").attr('src', seleteLang[0])
                $("#mainb").attr('src', seleteLang[1])
                $("#mainc").attr('src', seleteLang[2])
                $("#maind").attr('src', seleteLang[3])
                if ($(".slider").children('video').attr('src') !== seleteLang[4]) {
                    $(".slider").children('video').attr('src', seleteLang[4])
                }
                $("#cat").removeClass('select')
                $("#kor").removeClass('select')
                $("#eng").removeClass('select')
                $("#esp").addClass('select')

                setTimeout(function () {
                    $(".loading").css('display', 'none')
                }, 1000)
            })

            $("#left_pager").click(function () {
                slider.goToPrevSlide();
            })

            $("#right_pager").click(function () {
                slider.goToNextSlide();
            })
        </script>
    </body>
</html>